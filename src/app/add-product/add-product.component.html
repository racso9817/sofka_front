<div *ngIf="loading; else formProduct" class="responsive-form text-color">
  <ngx-skeleton-loader count="5" appearance="line"></ngx-skeleton-loader>
</div>

<ng-template #formProduct>
  <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="responsive-form text-color">
    <div>
      <label for="id">ID:</label>
      <input id="id" formControlName="id"
             [ngClass]="{'error': productForm.get('id')?.invalid && productForm.get('id')?.touched}" (change)="validateProductId($event.target)">
      <div *ngIf="productForm.get('id')?.invalid && productForm.get('id')?.touched" class="error-message">
        <span *ngIf="productForm.get('id')?.errors?.['required']">ID requerido.</span>
        <span *ngIf="productForm.get('id')?.errors?.['minlength']">ID debe tener mínimo 3 caracteres</span>
        <span *ngIf="productForm.get('id')?.errors?.['maxLength']">ID debe tener máximo 10 caracteres</span>
        <span *ngIf="productForm.get('id')?.errors?.['invalidId']">ID no válido!</span>
      </div>
    </div>

    <div>
      <label for="name">Name:</label>
      <input id="name" formControlName="name"
             [ngClass]="{'error': productForm.get('name')?.invalid && productForm.get('name')?.touched}">
      <div *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched" class="error-message">
        <span *ngIf="productForm.get('name')?.errors?.['required']">Nombre requerido.</span>
        <span *ngIf="productForm.get('name')?.errors?.['minlength']">Nombre debe tener al menos 5 caracteres.</span>
        <span *ngIf="productForm.get('name')?.errors?.['maxLength']">Nombre debe tener máximo 100 caracteres.</span>
      </div>
    </div>

    <div>
      <label for="description">Description:</label>
      <input id="description" formControlName="description"
             [ngClass]="{'error': productForm.get('description')?.invalid && productForm.get('description')?.touched}">
      <div *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched"
           class="error-message">
        <span *ngIf="productForm.get('description')?.errors?.['required']">Descripción requerida.</span>
        <span
          *ngIf="productForm.get('description')?.errors?.['minlength']">Descripción debe tener al menos 10 caracteres.</span>
        <span
          *ngIf="productForm.get('description')?.errors?.['maxLength']">Descripción debe tener máximo 200 caracteres.</span>
      </div>
    </div>

    <div>
      <label for="logo">Logo:</label>
      <input id="logo" formControlName="logo"
             [ngClass]="{'error': productForm.get('logo')?.invalid && productForm.get('logo')?.touched}">
      <div *ngIf="productForm.get('logo')?.invalid && productForm.get('logo')?.touched" class="error-message">
        <span *ngIf="productForm.get('logo')?.errors?.['required']">Logo requerido.</span>
      </div>
    </div>

    <div>
      <label for="date_revision">Date Revision:</label>
      <input id="date_revision" type="date" formControlName="date_revision"
             [ngClass]="{'error': productForm.get('date_revision')?.invalid && productForm.get('date_revision')?.touched}">
      <div *ngIf="productForm.get('date_revision')?.invalid && productForm.get('date_revision')?.touched"
           class="error-message">
        <span *ngIf="productForm.get('date_revision')?.errors?.['required']">Fecha de liberación requerida.</span>
        <span
          *ngIf="productForm.get('date_revision')?.errors?.['invalidDate']">Fecha de liberación debe ser de hoy o posterior.</span>
      </div>
    </div>

    <div>
      <label for="date_release">Date Release:</label>
      <input id="date_release" type="date" formControlName="date_release"
             [ngClass]="{'error': productForm.get('date_release')?.invalid && productForm.get('date_release')?.touched}">
      <div *ngIf="productForm.get('date_release')?.invalid && productForm.get('date_release')?.touched"
           class="error-message">
        <span *ngIf="productForm.get('date_release')?.errors?.['required']">Fecha de reestructuración requerida.</span>
      </div>
    </div>

    <button type="submit" [disabled]="productForm.invalid">Enviar</button>
  </form>
</ng-template>

<app-elements
  *ngIf="showModal"
  [message]="modalMessage"
  [showAcceptCancel]="showAcceptCancel"
  (close)="closeModal()"
  (accept)="acceptModal()"
  (cancel)="cancelModal()"
/>
